<!DOCTYPE html>
<html>
<head>
    <title>timer - </title>
    <script src="vendor/jquery-2.1.1.min.js"></script>
    <script src="vendor/underscore-1.6.0.min.js"></script>
    <script src="vendor/dflo.browser.recent.js"></script>
    <script src="timer.js"></script>
    <script src="timerview.js"></script>
    <link rel="stylesheet" href="timer.css"/>
</head>
<body>
<script>

    $(document).ready(function () {
        var timer = new Timer();
        var view = new TimerView();

        timer.startedOut.ports.stdout.connect(view.startedIn.ports.stdin);
        timer.tickedOut.ports.stdout.connect(view.tickedIn.ports.stdin);
        timer.clearedOut.ports.stdout.connect(view.clearedIn.ports.stdin);
        timer.endedOut.ports.stdout.connect(view.endedIn.ports.stdin);

        view.changeLengthOut.ports.stdout.connect(timer.changeLengthIn.ports.stdin);
        view.startOut.ports.stdout.connect(timer.startIn.ports.stdin);
        view.stopOut.ports.stdout.connect(timer.stopIn.ports.stdin);

        view.render();
        timer.clear();
        $(document.body).append(view.el);
    });

</script>
</body>
</html>